[ 일반적인 공격 과정 ]
| 과정 | 설명 |
| --- | --- |
| 초기침투 | 피싱 이메일, 악성 웹사이트, 소셜 엔지니어링 등을 이용해 목표 시스템에 초기 접근 |
| 교두보 확보 | 초기 침투 성공 후, 시스템 내에 악성 소프트웨어(예: 백도어)를 설치하여 지속적인 접근을 유지 |
| 권한 상승  | 시스템 내에서 더 높은 수준의 권한을 얻음 |
| 내부 정찰 | 네트워크 내부를 탐색하여 더 많은 시스템과 데이터에 접근할 수 있는 방법을 모색. <br> 다른 시스템으로 이동하는 과정인 '리터럴 무브먼트'를 포함 |
| 목적 행위 수행 | 데이터 탈취, 시스템 손상, 스파이 활동과 같은 목표 수행 |

공격자가 내부망에 침투했다고 바로 목표를 달성하는 것이 아니며 일정시간 내부망에서 정보를 수집해야 함.

방어자는 이 기간 동안 위협을 찾아 제거해야함 ⇒ 이로 인해 **탐지**가 중요해짐

<br><br>
   
![img](https://dd80b675424c132b90b3-e48385e382d2e5d17821a5e1d8e4c86b.ssl.cf1.rackcdn.com/files/images_articles/mandiant-global-median-dwell-time.jpg)

(출처:Global median dwell time, 2011-2020 (Source: Mandiant))

공격자가 내부망에 침투한 이후 발견되기까지 걸리는 날짜

2020년에는 24일이면 공격자를 탐지할 수 있음

<br><br>

![img](https://www.attackiq.com/wp-content/uploads/2019/06/blog-pyramid-pain-01-768x432.jpg)

(출처 : David J Bianco 의 Pyramid of Pain)

**고통의 피라미드** : 사이버 공격에서 공격자들이 목표를 달성하기 위해 취하는 다양한 단계와 이에 대응하는 방어 측면에서의 어려움을 시각적으로 나타내는 지표.

<br>

해시값 ) 스크립트 공격. 텍스트 기반이기 때문에 시그니처를 변경하기 쉬움 ⇒ 공격자 입장에서 우회하기 매우 쉬움 

네트워크/호스트 아티팩트 ) 공격을 당하게 되면 특정 파일이 생긴다던가 레지스트리에 어떤 키값이 생김 ⇒ IOC에 기반한 탐지를 우회하려면 아티팩트를 제거하기 위한 여러 노력이 필요함

<br>

edr → TTP기반 탐지기술

TTP : 공격자 행위 기반 탐지 

시그니처 기반 탐지 → 행위 기반 탐지로 발전

<br><br>

## IOC (indicator Of Compromise, 침해지표)

시스템이 악의적인 활동에 의해 **침해되었을 가능성**이 높음을 보여주는 운영체제 또는 네트워크 아티팩트 

IOC로 사용되는 정보 : 해시값, 파일 이름 및 경로, C2도메인, IP address, URI , 레지스트리 키, 서비스 이름/정보, 스케쥴된 태스크 정보 

- 특정 위협이나 공격이 발생했는지를 판단하기 위한 시그니처로 인식


**IOC 한계점 (시그니처 기반의 한계점을 그대로 이어받음)**

reactive함

유효기간 짧음 (수명이 짧음)

IOC가 쌓이면 관리 어려워짐. 탐지에도 시간 소요됨 

우회하기 용이함

안전하다고 확신할 수 없음에도 안전하다고 믿음 (=false sense of security)

<br><br>

## TTPs

위협 행위를 체계적으로 설명하기 위한 일종의 모델

전술 (Tactics) : 위협 행위의 목적

테크닉 (Techniques) : 위협 행위 목적을 달성하기 위해 사용하는 테크닉들

프로시저 (Procedures) : 테크닉을 구현하기 위한 **구체적인 절차**와 방법

<br><br>

## IOC vs TTP

LSASS : 사용자 인증 담당 (대표적인 해킹 도구: 미미카츠)

LSASS 프로세스의 메모리 영역에 접근하여 사용자들의 크레덴셜 정보를 획득하는 공격 행위에서 각각의 탐지 방법 

- IOC 기반 탐지 : 시스템 내에 미미카츠의 알려진 해시값과 동일한 스크립트가 있는지. 미미카츠만의 특이한 확장자가 존재하는지
- TTP 기반 탐지 : LSASS 메모리 영역에 접근하는 프로세스 모니터링, 인젝션 모니터링, LSASS에 로드된 DLL중 서명되지 않은 것 있는지 확인


C2는 만든지 얼마 안된 도메인을 구입해서 사용 (=베이비 도메인)

내부 시스템 중에 **최신 도메인과 통신하는 시스템** 찾아봄

<br><br>

## 📎 단어장

`C2` 또는 `C&C` : Command & Control 서버. 명령 및 제어, 공격자가 초기 침투에 성공한 장치와의 통신을 유지하는 데 사용하는 도구 및 기술 집합

`비콘` : 감염된 장비가 명령이나 추가 페이로드를 전달받기 위해 특정 시간에 공격자의 C2 서버에 연결을 시도하는 클라이언트 악성코드

`크레덴셜` : 시스템, 네트워크, 또는 애플리케이션에 대한 접근 권한을 인증하기 위해 사용되는 사용자 이름, 비밀번호, 토큰 등의 인증 정보
